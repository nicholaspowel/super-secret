<!DOCTYPE html>
<html>
    <head>
      <title>Hey Jen!</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- <meta http-equiv="X-UA-Compatible" content="ie=edge"> -->

      <!-- Do not add `link` tags-->
      <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

      <!-- Do not add `script` tags-->
      <script src="public/vendor.js" type="text/javascript" charset="utf-8" defer></script>
      <script src="public/application.js" type="text/javascript" charset="utf-8" defer></script>

    </head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">WWJMD</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a id="home" class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
          <a id="wheel" class="nav-item nav-link" href="#">Dev Says What?</a>
          <a class="nav-item nav-link" href="#">Other Stuff</a>
        </div>
      </div>
    </nav>



    <div class="img bgimg-1">
      <div class="caption">
      <span class="border">HEY JEN </span>
      </div>
    </div>

    <div class="text" style="color: #777;background-color:white;text-align:center;padding:50px 80px;text-align: right;">
      <h3 style="text-align:right;">JULY 29TH, 2019</h3>
      <p>On this day, 18 strangers gathered on the 13th floor of 125 Summer Street, Boston, to move their lives in a new direction.  We came from different backgrounds, had different stories, and had different levels of experience with coding.  But what we all had in common was a passion for programming and an incredible instructor who helped pave the way for us to reach our goals. </p>
    </div>

    <div class="img bgimg-2">
      <div class="caption">
      <span class="border">SEI 04 HERE</span>
      </div>
    </div>

    <div class="text" style="position:relative;">
      <div style="color:#ddd;background-color:#282E34;text-align:center;padding:50px 80px;text-align: left;">
      <h3 style="text-align:left;color:#ddd;;">OCTOBER 18TH, 2019</h3>
      <p>The day we'll all graduate and begin our adventures as real-life softwaree engineers.  We'll carry with us the knowledge of programming and the wisdom of the industry you provided to us.  We'll remember the days you encouraged us when we were feeling down and the the days you celebrated our victories, no matter how small.</p>
      </div>
    </div>

    <div class="img bgimg-3">
      <div class="caption">
      <span class="border">AND WE JUST WANTED TO SAY...</span>
      </div>
    </div>

    <div class="text" style="position:relative;">
      <div style="color:#ddd;background-color:#282E34;text-align:center;padding:50px 80px;text-align: right;">
      <p>We couldn't have done it without you.</p>
      </div>
    </div>

    <div class="img bgimg-1">
      <div class="caption">
      <span class="border">THANKS FOR EVERYTHING!</span>
      </div>
    </div>




<!-- <body> -->
<p> Click the wheel to see all the wonderful things SEI04 has to say about you!</p>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
   <script>
 var sequentialScale = d3.scaleSequential()
 	.domain([0, 39])
 	.interpolator(d3.interpolateRainbow);
   </script>

    <div id="chart"></div>
    <div id="developer"><h1></h1></div>

    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        var padding = {top:20, right:40, bottom:0, left:0},
            w = 500 - padding.left - padding.right,
            h = 500 - padding.top  - padding.bottom,
            r = Math.min(w, h)/2,
            rotation = 0,
            oldrotation = 0,
            picked = 100000,
            oldpick = [];
            //randomNumbers = getRandomNumbers();

        var data = [
                    {"label":"?",  "value":1,  "developer":"Nick says..."}, // padding
                    {"label":"?",  "value":1,  "developer":"Danny says..."}, //font-family
                    {"label":"?",  "value":1,  "developer":"Michelle says..."}, //color
                    {"label":"?",  "value":1,  "developer":"Soren says..."}, //font-weight
                    {"label":"?",  "value":1,  "developer":"Erin says..."}, //font-size
                    {"label":"?",  "value":1,  "developer":"Eric says..."}, //background-color
                    {"label":"?",  "value":1,  "developer":"Moises says..."}, //nesting
                    {"label":"?",  "value":1,  "developer":"Marc says..."}, //bottom
                    {"label":"?",  "value":1,  "developer":"David says..."}, //sans-serif
                    {"label":"?", "value":1, "developer":"Kim says..."}, //period
                    {"label":"?", "value":1, "developer":"Martin says..."}, //pound sign
                    {"label":"?", "value":1, "developer":"Elina says..."}, //<body>
                    {"label":"?", "value":1, "developer":"Lance says..."}, //<ul>
                    {"label":"?", "value":1, "developer":"Nancy says..."}, //<h1>
                    {"label":"?", "value":1, "developer":"Dave says..."}, //margin
                    {"label":"?", "value":1, "developer":"Soo says..."}, //< >
                    {"label":"?", "value":1, "developer":"Jenny says..."}, // { }
                    {"label":"?", "value":1, "developer":"Sarah says..."}, //<p>
        ];


        var svg = d3.select('#chart')
            .append("svg")
            .data([data])
            .attr("width",  w + padding.left + padding.right)
            .attr("height", h + padding.top + padding.bottom);

        var container = svg.append("g")
            .attr("class", "chartholder")
            .attr("transform", "translate(" + (w/2 + padding.left) + "," + (h/2 + padding.top) + ")");

        var vis = container
            .append("g");

        var pie = d3.layout.pie().sort(null).value(function(d){return 1;});

        // declare an arc generator function
        var arc = d3.svg.arc().outerRadius(r);

        // select paths, use arc generator to draw
        var arcs = vis.selectAll("g.slice")
            .data(pie)
            .enter()
            .append("g")
            .attr("class", "slice");

        arcs.append("path")
            .attr("fill", function(d, i){ return sequentialScale(i); })
            .attr("d", function (d) { return arc(d); });

        // add the text
        arcs.append("text").attr("transform", function(d){
                d.innerRadius = 0;
                d.outerRadius = r - 40;
                d.angle = (d.startAngle + d.endAngle)/2;
                return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")translate(" + (d.outerRadius -10) +")";
            })
            .attr("text-anchor", "end")
            .text( function(d, i) {
                return data[i].label;
            });

        container.on("click", spin);


        function spin(d){

            container.on("click", null);

            //all slices have been seen, all done
            console.log("OldPick: " + oldpick.length, "Data length: " + data.length);
            if(oldpick.length == data.length){
                console.log("done");
                container.on("click", null);
                return;
            }

            var  ps       = 360/data.length,
                 pieslice = Math.round(1440/data.length),
                 rng      = Math.floor((Math.random() * 1440) + 360);

            rotation = (Math.round(rng / ps) * ps);

            picked = Math.round(data.length - (rotation % 360)/ps);
            picked = picked >= data.length ? (picked % data.length) : picked;


            if(oldpick.indexOf(picked) !== -1){
                d3.select(this).call(spin);
                return;
            } else {
                oldpick.push(picked);
            }

            rotation += 90 - Math.round(ps/2);

            vis.transition()
                .duration(3000)
                .attrTween("transform", rotTween)
                .each("end", function(){

                    //mark developer as seen
                    d3.select(".slice:nth-child(" + (picked + 1) + ") path")
                        //.attr("fill-opacity", "0.4");

                    //populate developer
                    d3.select("#developer h1")
                        .text(data[picked].developer);

                    oldrotation = rotation;

                    container.on("click", spin);
                });
        }

        //make arrow
        svg.append("g")
            .attr("transform", "translate(" + (w + padding.left + padding.right) + "," + ((h/2)+padding.top) + ")")
            .append("path")
            .attr("d", "M-" + (r*.15) + ",0L0," + (r*.05) + "L0,-" + (r*.05) + "Z")
            .style({"fill":"black"});

        //draw spin circle
        container.append("circle")
            .attr("cx", 0)
            .attr("cy", 0)
            .attr("r", 20)
            .style({"fill":"#e5b700","cursor":"pointer"});

        //spin text
        container.append("text")
            .attr("x", 0)
            .attr("y", -230)
            .attr("text-anchor", "middle")
            .text("Wheel of Appreciation")
            .style({"font-weight":"bold", "font-size":"30px"});


        function rotTween(to) {
          var i = d3.interpolate(oldrotation % 360, rotation);
          return function(t) {
            return "rotate(" + i(t) + ")";
          };
        }


        function getRandomNumbers(){
            var array = new Uint16Array(1000);
            var scale = d3.scale.linear().range([360, 1440]).domain([0, 100000]);

            if(window.hasOwnProperty("crypto") && typeof window.crypto.getRandomValues === "function"){
                window.crypto.getRandomValues(array);
                console.log("works");
            } else {
                //no support for crypto, get crappy random numbers
                for(var i=0; i < 1000; i++){
                    array[i] = Math.floor(Math.random() * 100000) + 1;
                }
            }

            return array;
        }
    </script>
  <!-- </div> -->

</body>
</html>
